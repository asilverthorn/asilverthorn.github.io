(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{1330:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seed",function(){return t(1669)}])},8324:function(e,a,t){"use strict";t.d(a,{x:function(){return o}});var n=t(7458),s=t(6191),l=t(516),r=t(2826),i=t(9449);let c=(0,l.j)([],{variants:{hasRomData:{true:["hidden"],false:["block"]}}}),o=e=>{let{clearRomValues:a,hasRomData:t,inputRef:l,onRomSelect:o,romName:d,shortRomName:u,error:m,success:f}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"Step 2: Select v1.0 US ROM file by clicking the input below"}),(0,n.jsxs)("div",{className:"",children:[!f&&!m&&(0,n.jsx)(i.L,{variant:"warning",children:"Waiting for ROM upload"}),f&&(0,n.jsx)(i.L,{variant:"success",children:"Valid ROM"}),m?(0,n.jsx)(i.L,{variant:"danger",children:m}):null]}),(0,n.jsxs)("div",{className:c({className:"flex gap-4",hasRomData:t}),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(s.p6,{children:"Once you have selected a valid ROM it will be reused for future visits"}),(0,n.jsxs)(s.zx,{className:"w-fit",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.click()},variant:"primary",children:[(0,n.jsx)(r.s_P,{className:"inline"})," Upload v1.0 US ROM file.."]})]}),(0,n.jsx)("input",{className:"hidden",id:"rom_name",ref:l,name:"rom",onChange:o,type:"file"})]}),(0,n.jsxs)("div",{className:c({className:"flex flex-col items-start md:max-w-[500px] md:flex-row md:items-center gap-4",hasRomData:!t}),children:[(0,n.jsxs)(s.p6,{children:["A ROM named\xa0",(0,n.jsx)("strong",{className:"text-sm tracking-widest underline underline-offset-2",title:d,children:u}),"\xa0was previously uploaded and validated. To select another ROM, click Clear ROM"]}),(0,n.jsxs)(s.zx,{className:"w-fit flex-shrink-0",disabled:!t,onClick:a,size:"small",variant:"danger",children:[(0,n.jsx)(r.lUB,{className:"inline"})," Clear ROM"]})]})]})}},1669:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return y}});var n=t(7458),s=t(5106),l=t.n(s),r=t(2983),i=t(1903),c=t(87),o=t(6191),d=t(516),u=t(8936),m=t.n(u),f=t(8499),h=t(34),x=t(340),g=t(2218),p=t(7918),j=t(3412),v=t.n(j),w=t(8324);let N=e=>{let{className:a,seed:t,...s}=e,l=(0,r.useRef)(null);(0,f.v9)(h.Ux);let[i,c]=(0,r.useState)(null),[u,j]=(0,r.useState)(""),[N,b]=(0,r.useState)(null),[S,R]=(0,r.useState)(!1),y=Boolean(i),_=u.slice(u.length-7,u.length),O=u?u.length>20?u.slice(0,8).concat("...",_):u:"";(0,r.useEffect)(()=>{if(!l.current)return;let e=localStorage.getItem("rom_data"),a=localStorage.getItem("rom_name");e&&(c(e),R(!0)),a&&j(a)},[l]);let k=async()=>{let{filename:e,patch:a,seed_id:n,log:s}=t,l=p.a.decode((0,x.X)(a),(0,x.X)(i)),r=new(v());r.file("".concat(e,".smc"),l,{binary:!0}),r.file("".concat(e,".txt"),s).generateAsync({type:"blob"}).then(a=>{var t=document.createElement("a");t.href=window.URL.createObjectURL(a),t.download="".concat(e,".zip"),t.click()})},M=()=>{localStorage.removeItem("rom_name"),localStorage.removeItem("rom_data"),j(""),c(null),R(!1),b(null)},C=e=>{let a=m()(e.target.files),t=new FileReader;a&&(t.onload=async function(){let e=new Uint8Array(t.result),n=await (0,g.L)(e=await (0,g.o)(e));if(!n.success){b("".concat(n.message));return}let s="",l=e.byteLength;for(let r=0;r<l;r++)s+=String.fromCharCode(e[r]);s=btoa(s),R(!0),b(null);try{localStorage.setItem("rom_data",s),localStorage.setItem("rom_name",a.name),c(s),j(a.name)}catch(i){return}},t.readAsArrayBuffer(a))};return(0,n.jsxs)(o.Zb,{...s,contentClassName:(0,d.cx)("p-0 gap-3",a),title:"Generate",children:[(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsx)("h3",{className:"font-medium text-base",children:"Step 1: Verify the following flags and seed above are correct"})}),(0,n.jsx)(o.iz,{}),(0,n.jsx)(w.x,{clearRomValues:M,hasRomData:y,romName:u,shortRomName:O,error:N,inputRef:l,onRomSelect:C,success:S}),(0,n.jsx)(o.iz,{}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("h3",{className:"font-medium text-lg",children:"Step 3: Click Generate!"}),i?null:(0,n.jsx)(o.p6,{children:"This button will be disabled until a valid ROM is selected"})]}),(0,n.jsx)("div",{className:"fle flex-col gap-2 pl-3",children:(0,n.jsx)(o.zx,{disabled:!y,onClick:k,variant:"primary",children:"Generate"})})]})};var b=t(8425);let S=/\nFlags.+\n/g,R=()=>{let[e,a]=(0,r.useState)(null),[t,s]=(0,r.useState)(""),[d,u]=(0,r.useState)("");return(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("id");if(t){u(t);let n="".concat("https://narshe-qhiizr5utq-uw.a.run.app/","/api/seed/ff6wc/").concat(t);fetch(n).then(e=>e.json()).then(e=>{let{data:t,errors:n}=e;t?(a(t),s(t.log.replace(S,"\n"))):s("Error retrieving seed: ".concat(n))})}else s("No id given; access this page with ?id=XYZ (where XYZ is a generated seed id)")},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l(),{children:[(0,n.jsx)("title",{children:"FF6WC seed ".concat(d)}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(b.t,{}),(0,n.jsxs)("div",{className:"flex flex-col gap-6 items-center px-12 py-6",children:[(0,n.jsx)(o.Zb,{className:"max-w-[1260px]",title:"Log",children:(0,n.jsx)(i.x,{children:(0,n.jsx)(o.dn,{children:t||"Loading..."})})}),e&&(0,n.jsx)(N,{seed:e})]}),(0,n.jsx)(c.$_,{})]})};var y=R},2218:function(e,a,t){"use strict";function n(e){return 3146240===e.length?e.slice(512):e}async function s(e){return 3145728!==e.length?{success:!1,message:"Invalid ROM size. Please upload an uncompressed US version 1.0 ROM file. Expected ".concat(3145728," and received ").concat(e.length,".")}:"0f51b4fca41b7fd509e4b8f9d543151f68efa5e97b08493e4b2a0c06f5d8d5e2"!==Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",e))).map(e=>e.toString(16).padStart(2,"0")).join("")?{success:!1,message:"Invalid ROM hash. Please upload an uncompressed US version 1.0 ROM file"}:{success:!0,message:""}}t.d(a,{L:function(){return s},o:function(){return n}})}},function(e){e.O(0,[433,31,128,613,762,876,882,774,888,179],function(){return e(e.s=1330)}),_N_E=e.O()}]);