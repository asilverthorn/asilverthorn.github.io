"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{1461:function(e,l,t){t.d(l,{N:function(){return s}});var n=t(7458),r=t(6509),a=t(6191);let s=e=>{let{helperText:l,flag:t,label:s}=e;return(0,n.jsxs)("div",{className:"flex-grow wrap",children:[(0,n.jsx)(r.A,{htmlFor:t,children:s}),(0,n.jsx)(a.p6,{children:l})]})}},6509:function(e,l,t){t.d(l,{A:function(){return r}});var n=t(7458);let r=e=>{let{children:l,htmlFor:t,...r}=e;return(0,n.jsx)("h4",{className:"text-sm font-medium",children:(0,n.jsx)("label",{...r,htmlFor:t,children:l})})}},7551:function(e,l,t){t.d(l,{_:function(){return s}});var n=t(7458),r=t(516);let a=(0,r.j)(["m-auto"],{defaultVariants:{columns:1},variants:{columns:{1:["columns-1","max-w-full lg:max-w-[1260px]","p-5"],2:["columns-1","md:columns-1 lg:columns-2 lg:max-w-[1260px]","p-5"],3:["columns-1","md:columns-2 xl:columns-3 max-w-full","p-5"],null:[]}}}),s=e=>{let{children:l,className:t,columns:r}=e;return(0,n.jsx)("div",{className:a({columns:r,className:t}),children:l})}},450:function(e,l,t){t.d(l,{P:function(){return h}});var n=t(7458),r=t(516),a=t(8936),s=t.n(a),i=t(7875),u=t.n(i),p=t(2983),c=t(1247),o=t(8055),m=t(9400);let d=e=>{let{children:l,data:t,...r}=e,{helperText:a,label:s,value:i}=t;return(0,n.jsxs)(o.c.Option,{data:t,...r,children:[(0,n.jsx)("p",{className:"text-sm",children:l}),(0,n.jsx)("p",{className:"text-xs",children:a})]})},x="ArrowDown",v="ArrowUp",f=[x,v],h=e=>{let{className:l,containerClassName:t,components:a={},defaultValue:i,options:o,onChange:h,placeholder:j,nextOnArrowKeys:g,value:N}=e,I=(0,p.useId)(),{Option:b=d,...w}=a,y=(0,p.useRef)(),O=(0,p.useCallback)(e=>{var l,t;let n=o.indexOf(N);if(o.length&&-1===n){console.warn("item not found in options");return}e.key===x?(h(null!==(l=o[n+1])&&void 0!==l?l:u()(o)),e.preventDefault()):e.key===v&&(h(null!==(t=o[n-1])&&void 0!==t?t:s()(o)),e.preventDefault())},[h,o,N]),C=(0,c.y1)(O,0);return(0,n.jsx)("div",{className:(0,r.cx)("flex flex-col gap-1",t),children:(0,n.jsx)(m.ZP,{className:(0,r.cx)(l,"ff6wc-select-container"),classNamePrefix:"ff6wc-select",components:{Option:b,...w},instanceId:I,getOptionLabel:e=>e.label,getOptionValue:e=>e.value,options:o,onChange:e=>{h(e)},placeholder:j,ref:y,value:null!=N?N:i,onKeyDown:e=>{g&&!y.current.props.menuIsOpen&&!e.ctrlKey&&f.includes(e.key)&&(e.preventDefault(),C(e))}})})}},7340:function(e,l,t){t.d(l,{FN:function(){return r},QO:function(){return s},o1:function(){return i},pF:function(){return n},sA:function(){return a}});let n="0.1.2.3.4.5.6.7.8.9.10.11.12.13.14.15.18.19.20.21",r="2.1.4.4.0.0.0.3.3.4.5.3.3.5.1.0.6.1.0.3",a="0.1.2.3.4.5.6",s="0.1.2.3.4.5.6.7.8.9.10.11.12.13.14",i="TERRA.LOCKE.CYAN.SHADOW.EDGAR.SABIN.CELES.STRAGO.RELM.SETZER.MOG.GAU.GOGO.UMARO"},3099:function(e,l,t){t.d(l,{T:function(){return _}});var n=t(7458),r=t(3231),a=t(6191),s=t(8499),i=t(1903),u=t(916),p=t.n(u),c=t(2983),o=t(7465),m=t(1455);let d=e=>{let{alphaBytes:l,rgbBytes:t,scale:r=2}=e,a=(0,c.useRef)(null);return(0,c.useEffect)(()=>{let e=a.current;if(!e)return;let n=(0,m._)(t,r,40,40);(0,m.J)(n,l,e.getContext("2d",{willReadFrequently:!0}),40*r,40*r)},[l,a,t,r]),(0,n.jsx)("canvas",{className:"inline",ref:a,width:40*r,height:40*r})},x=e=>fetch(e).then(e=>e.json());function v(e){let{portraitId:l,scale:t=2}=e,{data:r,error:a}=(0,o.Z)("".concat("https://narshe-qhiizr5utq-uw.a.run.app/","/api/portrait/").concat(l),x),{alphaBytes:s,rgbBytes:i}=c.useMemo(()=>{if(!r)return{alphaBytes:[],rgbBytes:[]};let{palette:e=[],sprite:l=[]}=r,t=e[0],n=l.map(l=>e[l]).flat();return{alphaBytes:t,rgbBytes:n}},[r]),u=(0,n.jsx)(d,{alphaBytes:s,rgbBytes:i,scale:t});return(0,n.jsx)(n.Fragment,{children:u})}var f=t(450),h=t(6851),j=t(7340),g=t(34);let N=e=>{var l,t,a,i;let{id:u,Label:o,paletteOptionCount:m,portraitId:d,portraits:x,sprites:N}=e,I=(0,s.I0)(),b=null!==(l=(0,g.Iw)("-cspr"))&&void 0!==l?l:j.pF,w=null!==(t=(0,g.Iw)("-cspp"))&&void 0!==t?t:j.FN,y=null!==(a=(0,g.Iw)("-cpal"))&&void 0!==a?a:j.sA,O=null!==(i=(0,g.Iw)("-cpor"))&&void 0!==i?i:j.QO,C=b.split(".").map(e=>Number.parseInt(e)),A=w.split(".").map(e=>Number.parseInt(e)),B=y.split(".").map(e=>Number.parseInt(e)),F=O.split(".").map(e=>Number.parseInt(e)),k=(0,c.useMemo)(()=>N.map(e=>{let{id:l,key:t}=e;return{label:t,value:l.toString()}}),[N]),M=(0,c.useMemo)(()=>k.slice(0,24),[k]),R=(0,c.useMemo)(()=>p()(k.slice(24,k.length),e=>e.label),[k]),S=(0,c.useMemo)(()=>[...M,...R],[M,R]),E=S.reduce((e,l)=>(e[l.value]=l,e),{}),z=(0,c.useMemo)(()=>x.map(e=>{let{id:l,key:t}=e;return{label:t,value:l.toString()}}),[x]),P=(0,c.useMemo)(()=>z.slice(0,24),[z]),D=(0,c.useMemo)(()=>p()(z.slice(24,z.length),e=>e.label),[z]),K=(0,c.useMemo)(()=>[...P,...D],[P,D]),Z=K.reduce((e,l)=>(e[l.value]=l,e),{}),G=Array.from(Array(m+1)).map((e,l)=>({label:"Palette ".concat(l),value:l.toString()})),_=G.reduce((e,l)=>(e[l.value]=l,e),{}),[q,L]=(0,c.useState)(1),Q=()=>{let e=r.rc.indexOf(q);null!=r.rc[e+1]?L(r.rc[e+1]):L(1)};return(0,n.jsxs)("div",{className:"flex gap-8",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3 items-center min-w-[150px]",children:[o,(0,n.jsxs)("div",{className:"flex justify-evenly items-end w-full",children:[null!==d?(0,n.jsx)(v,{portraitId:F[d]}):null,(0,n.jsx)("span",{children:(0,n.jsx)(h.Z,{onClick:Q,paletteId:B[A[u]],poseId:q,spriteId:C[u],scale:3})})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 flex-grow",children:[null!=d?(0,n.jsx)(f.P,{options:K,nextOnArrowKeys:!0,onChange:e=>{if(e){let l=[...F];l.splice(d,1,Number.parseInt(e.value)),I((0,g.mB)({flag:"-cpor",value:l.join(".")}))}},value:Z[F[d]]}):null,(0,n.jsx)(f.P,{nextOnArrowKeys:!0,onChange:e=>{if(e){let l=[...C];l.splice(u,1,Number.parseInt(e.value)),I((0,g.mB)({flag:"-cspr",value:l.join(".")}))}},options:S,value:E[C[u]]}),(0,n.jsx)(f.P,{nextOnArrowKeys:!0,options:G,onChange:e=>{if(e){let l=[...A];l.splice(u,1,Number.parseInt(e.value)),I((0,g.mB)({flag:"-cspp",value:l.join(".")}))}},value:_[A[u]]})]})]},u)};var I=t(9157),b=t.n(I);let w=e=>{var l;let{characterId:t}=e,r=(0,s.I0)(),i=null!==(l=(0,g.Iw)("-name"))&&void 0!==l?l:j.o1,u=i.split("."),p=e=>{let l=e.slice(0,6),n=[...u];n.splice(t,1,l),r((0,g.mB)({flag:"-name",value:n.join(".")}))};return(0,n.jsx)(a.II,{onChange:e=>p(e.target.value),value:u[t]})},y=e=>{var l,t,u;let{palettes:p=[],portraits:c=[],sprites:o=[]}=e,m=(0,s.I0)(),d=null!==(l=(0,g.Iw)("-cpor"))&&void 0!==l?l:j.QO,x=null!==(t=(0,g.Iw)("-cspr"))&&void 0!==t?t:j.pF,v=null!==(u=(0,g.Iw)("-cspp"))&&void 0!==u?u:j.FN,f=j.QO.split(".").map(e=>Number.parseInt(e)).slice(0,14),h=j.pF.split(".").map(e=>Number.parseInt(e)).slice(0,14),I=j.FN.split(".").map(e=>Number.parseInt(e)).slice(0,14),y=()=>{let e=b()(o.map(e=>{let{id:l}=e;return l}),14),l=(null==x?void 0:x.split(".").map(e=>Number.parseInt(e)))||[];null==l||l.splice(0,14,...e),m((0,g.mB)({flag:"-cspr",value:l.join(".")}))},O=()=>{let e=b()(c.map(e=>{let{id:l}=e;return l}),14),l=(null==d?void 0:d.split(".").map(e=>Number.parseInt(e)))||[];null==l||l.splice(0,14,...e),m((0,g.mB)({flag:"-cpor",value:l.join(".")}))},C=()=>{let e=(null==x?void 0:x.split(".").map(e=>Number.parseInt(e)))||[];null==e||e.splice(0,14,...h),m((0,g.mB)({flag:"-cspr",value:e.join(".")}));let l=(null==d?void 0:d.split(".").map(e=>Number.parseInt(e)))||[];null==l||l.splice(0,14,...f),m((0,g.mB)({flag:"-cpor",value:l.join(".")}));let t=(null==v?void 0:v.split(".").map(e=>Number.parseInt(e)))||[];null==t||t.splice(0,14,...I),m((0,g.mB)({flag:"-cspp",value:t.join(".")})),m((0,g.mB)({flag:"-name",value:j.o1}))};return(0,n.jsx)(a.Zb,{title:"Character Sprites",children:(0,n.jsxs)(i.x,{children:[(0,n.jsxs)("span",{className:"inline-flex gap-2 flex-wrap",children:[(0,n.jsx)(a.zx,{disabled:!c.length,onClick:O,variant:"primary",children:"Randomize Portraits"}),(0,n.jsx)(a.zx,{disabled:!o.length,onClick:y,variant:"primary",children:"Randomize Sprites"}),(0,n.jsx)(a.zx,{onClick:C,variant:"primary",children:"Default"})]}),r.dd.map((e,l)=>(0,n.jsx)(N,{id:l,Label:(0,n.jsx)(w,{characterId:l}),paletteOptionCount:5,palettes:p,portraitId:l,portraits:c,sprites:o},e))]})})};var O=t(7551),C=t(7371),A=t(1461),B=t(8055),F=t(282),k=t.n(F);let M=e=>{let{colors:l}=e,t=(0,c.useRef)(null);return(0,c.useEffect)(()=>{var e;let n=null==t?void 0:null===(e=t.current)||void 0===e?void 0:e.getContext("2d",{willReadFrequently:!0});if(!n)return;let r=0;l.forEach(e=>{let[l,t,a]=e,s=k()(l,t,a);n.fillStyle=s.hex(),null==n||n.fillRect(r,0,18,18),r+=18})},[l]),(0,n.jsx)("canvas",{className:"inline",height:18,width:288,ref:t})},R=e=>{let{children:l,data:t,...r}=e;return(0,n.jsx)(B.c.Option,{data:t,...r,children:(0,n.jsxs)("div",{className:"flex flex-col justify-center gap-2",children:[l,(0,n.jsx)("div",{children:(0,n.jsx)(M,{colors:t.color})})]})})},S=e=>{let{options:l,onChange:t,value:r}=e;return(0,c.useId)(),(0,n.jsx)("div",{className:"flex flex-col gap-1 flex-grow",children:(0,n.jsx)(f.P,{components:{Option:R},nextOnArrowKeys:!0,options:l,onChange:e=>{t(e)},value:r})})};var E=t(1808);let z="0.1.2.3.4.5.6",P=e=>{var l;let{palettes:t=[]}=e,r=(0,s.I0)(),u=null!==(l=(0,g.Iw)("-cpal"))&&void 0!==l?l:z,o=u.split(".").map(e=>Number.parseInt(e)),m=(0,c.useMemo)(()=>t.map(e=>{let{id:l,key:t,palette:n}=e;return{label:t,value:l.toString(),color:n}}),[t]),d=(0,c.useMemo)(()=>m.slice(0,7),[m]),x=(0,c.useMemo)(()=>p()(m.slice(7,m.length),e=>e.label),[m]),v=(0,c.useMemo)(()=>[...d,...x],[d,x]),f=v.reduce((e,l)=>(e[l.value]=l,e),{}),h=Array.from(Array(7)),j=()=>{let e=b()(t.map(e=>{let{id:l}=e;return l}),h.length);r((0,g.mB)({flag:"-cpal",value:e.join(".")}))},N=()=>{r((0,g.mB)({flag:"-cpal",value:z}))};return(0,n.jsx)(a.Zb,{title:"Sprite Palettes",children:(0,n.jsxs)(i.x,{children:[(0,n.jsxs)("span",{className:"inline-flex gap-2 flex-wrap",children:[(0,n.jsx)(a.zx,{disabled:!t.length,onClick:j,variant:"primary",children:"Randomize Palettes"}),(0,n.jsx)(a.zx,{onClick:N,variant:"primary",children:"Default"})]}),h.map((e,l)=>{var t,a;let s=null!==(a=null===(t=f[o[l]])||void 0===t?void 0:t.color)&&void 0!==a?a:[];return(0,n.jsxs)(c.Fragment,{children:[l?(0,n.jsx)(E.i,{}):null,(0,n.jsxs)("div",{className:"flex items-center gap-12 flex-grow min-w-full",children:[(0,n.jsx)(A.N,{flag:"-cpal",helperText:"",label:"Palette ".concat(l)}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(S,{onChange:e=>{if(e){let t=[...o];t.splice(l,1,Number.parseInt(e.value)),r((0,g.mB)({flag:"-cpal",value:t.join(".")}))}},options:v,value:f[o[l]]})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(M,{colors:s})})]},l)})]})})},D={14:"Soldier",15:"Imp",16:"Esper Terra",17:"Merchant",18:"Ghost",19:"Kefka"},K={15:14},Z=[14,15,16,17,18,19],G=e=>{var l,t,r,u,p;let{palettes:o=[],portraits:m=[],sprites:d=[]}=e,x=(0,s.I0)(),v=null!==(l=(0,g.Iw)("-cpor"))&&void 0!==l?l:j.QO,f=null!==(t=(0,g.Iw)("-cspr"))&&void 0!==t?t:j.pF,h=null!==(r=(0,g.Iw)("-cspp"))&&void 0!==r?r:j.FN,I=j.QO.split(".").map(e=>Number.parseInt(e)).slice(14,15),w=j.pF.split(".").map(e=>Number.parseInt(e)).slice(14,14+Z.length),y=j.FN.split(".").map(e=>Number.parseInt(e)).slice(14,14+Z.length),O=()=>{let e=b()(d.map(e=>{let{id:l}=e;return l}),Z.length),l=(null==f?void 0:f.split(".").map(e=>Number.parseInt(e)))||[];null==l||l.splice(14,Z.length,...e),x((0,g.mB)({flag:"-cspr",value:l.join(".")}))},C=()=>{let e=(null==f?void 0:f.split(".").map(e=>Number.parseInt(e)))||[];null==e||e.splice(14,Z.length,...w),x((0,g.mB)({flag:"-cspr",value:e.join(".")}));let l=(null==v?void 0:v.split(".").map(e=>Number.parseInt(e)))||[];null==l||l.splice(14,1,...I),x((0,g.mB)({flag:"-cpor",value:l.join(".")}));let t=(null==h?void 0:h.split(".").map(e=>Number.parseInt(e)))||[];null==t||t.splice(14,Z.length,...y),x((0,g.mB)({flag:"-cspp",value:t.join(".")}))};return(0,n.jsx)(a.Zb,{title:"Other Sprites",children:(0,n.jsxs)(i.x,{children:[(0,n.jsxs)("span",{className:"inline-flex gap-2 flex-wrap",children:[(0,n.jsx)(a.zx,{disabled:!d.length,onClick:O,variant:"primary",children:"Randomize Sprites"}),(0,n.jsx)(a.zx,{onClick:C,variant:"primary",children:"Default"})]}),Z.map((e,l)=>(0,n.jsxs)(c.Fragment,{children:[l?(0,n.jsx)(E.i,{}):null,(0,n.jsx)(N,{id:e,Label:null!==(u=D[e])&&void 0!==u?u:null,paletteOptionCount:6,palettes:o,portraitId:null!==(p=K[e])&&void 0!==p?p:null,portraits:m,sprites:d},e)]},e))]})})},_=()=>{let{data:e}=(0,C.ZP)(["/api/sprites"],async()=>{let e=await fetch("".concat("https://narshe-qhiizr5utq-uw.a.run.app/","/api/sprites")),l=await e.json();return l}),{palettes:l=[],portraits:t=[],sprites:r=[]}=e||{};return(0,n.jsxs)(O._,{columns:2,children:[(0,n.jsx)(P,{palettes:l}),(0,n.jsx)(G,{palettes:l,portraits:t,sprites:r}),(0,n.jsx)(y,{palettes:l,portraits:t,sprites:r})]})}}}]);