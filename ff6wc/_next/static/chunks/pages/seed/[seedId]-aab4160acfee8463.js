(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[115],{953:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seed/[seedId]",function(){return t(1615)}])},8324:function(e,a,t){"use strict";t.d(a,{x:function(){return o}});var n=t(7458),l=t(6191),s=t(516),r=t(2826),c=t(9449);let i=(0,s.j)([],{variants:{hasRomData:{true:["hidden"],false:["block"]}}}),o=e=>{let{clearRomValues:a,hasRomData:t,inputRef:s,onRomSelect:o,romName:d,shortRomName:u,error:m,success:f}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"Step 2: Select v1.0 US ROM file by clicking the input below"}),(0,n.jsxs)("div",{className:"",children:[!f&&!m&&(0,n.jsx)(c.L,{variant:"warning",children:"Waiting for ROM upload"}),f&&(0,n.jsx)(c.L,{variant:"success",children:"Valid ROM"}),m?(0,n.jsx)(c.L,{variant:"danger",children:m}):null]}),(0,n.jsxs)("div",{className:i({className:"flex gap-4",hasRomData:t}),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(l.p6,{children:"Once you have selected a valid ROM it will be reused for future visits"}),(0,n.jsxs)(l.zx,{className:"w-fit",onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()},variant:"primary",children:[(0,n.jsx)(r.s_P,{className:"inline"})," Upload v1.0 US ROM file.."]})]}),(0,n.jsx)("input",{className:"hidden",id:"rom_name",ref:s,name:"rom",onChange:o,type:"file"})]}),(0,n.jsxs)("div",{className:i({className:"flex flex-col items-start md:max-w-[500px] md:flex-row md:items-center gap-4",hasRomData:!t}),children:[(0,n.jsxs)(l.p6,{children:["A ROM named\xa0",(0,n.jsx)("strong",{className:"text-sm tracking-widest underline underline-offset-2",title:d,children:u}),"\xa0was previously uploaded and validated. To select another ROM, click Clear ROM"]}),(0,n.jsxs)(l.zx,{className:"w-fit flex-shrink-0",disabled:!t,onClick:a,size:"small",variant:"danger",children:[(0,n.jsx)(r.lUB,{className:"inline"})," Clear ROM"]})]})]})}},1615:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return y}});var n=t(7458),l=t(5106),s=t.n(l),r=t(2983),c=t(1903),i=t(87),o=t(6191),d=t(516),u=t(8936),m=t.n(u),f=t(8499),x=t(34),h=t(340),p=t(2218),g=t(7918),j=t(3412),v=t.n(j),w=t(8324);let b=e=>{let{className:a,seed:t,...l}=e,s=(0,r.useRef)(null);(0,f.v9)(x.Ux);let[c,i]=(0,r.useState)(null),[u,j]=(0,r.useState)(""),[b,N]=(0,r.useState)(null),[S,R]=(0,r.useState)(!1),y=Boolean(c),_=u.slice(u.length-7,u.length),O=u?u.length>20?u.slice(0,8).concat("...",_):u:"";(0,r.useEffect)(()=>{if(!s.current)return;let e=localStorage.getItem("rom_data"),a=localStorage.getItem("rom_name");e&&(i(e),R(!0)),a&&j(a)},[s]);let k=async()=>{let{filename:e,patch:a,seed_id:n,log:l}=t,s=g.a.decode((0,h.X)(a),(0,h.X)(c)),r=new(v());r.file("".concat(e,".smc"),s,{binary:!0}),r.file("".concat(e,".txt"),l).generateAsync({type:"blob"}).then(a=>{var t=document.createElement("a");t.href=window.URL.createObjectURL(a),t.download="".concat(e,".zip"),t.click()})},M=()=>{localStorage.removeItem("rom_name"),localStorage.removeItem("rom_data"),j(""),i(null),R(!1),N(null)},C=e=>{let a=m()(e.target.files),t=new FileReader;a&&(t.onload=async function(){let e=new Uint8Array(t.result),n=await (0,p.L)(e=await (0,p.o)(e));if(!n.success){N("".concat(n.message));return}let l="",s=e.byteLength;for(let r=0;r<s;r++)l+=String.fromCharCode(e[r]);l=btoa(l),R(!0),N(null);try{localStorage.setItem("rom_data",l),localStorage.setItem("rom_name",a.name),i(l),j(a.name)}catch(c){return}},t.readAsArrayBuffer(a))};return(0,n.jsxs)(o.Zb,{...l,contentClassName:(0,d.cx)("p-0 gap-3",a),title:"Generate",children:[(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsx)("h3",{className:"font-medium text-base",children:"Step 1: Verify the following flags and seed above are correct"})}),(0,n.jsx)(o.iz,{}),(0,n.jsx)(w.x,{clearRomValues:M,hasRomData:y,romName:u,shortRomName:O,error:b,inputRef:s,onRomSelect:C,success:S}),(0,n.jsx)(o.iz,{}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("h3",{className:"font-medium text-lg",children:"Step 3: Click Generate!"}),c?null:(0,n.jsx)(o.p6,{children:"This button will be disabled until a valid ROM is selected"})]}),(0,n.jsx)("div",{className:"fle flex-col gap-2 pl-3",children:(0,n.jsx)(o.zx,{disabled:!y,onClick:k,variant:"primary",children:"Generate"})})]})};var N=t(8425);let S=/\nFlags.+\n/g,R=()=>{let[e,a]=(0,r.useState)(null),[t,l]=(0,r.useState)(""),[d,u]=(0,r.useState)("");return(0,r.useEffect)(()=>{let e=window.location.href.split("/").pop();u(e);let t="".concat("https://narshe-qhiizr5utq-uw.a.run.app/","/api/seed/ff6wc/").concat(e);fetch(t).then(e=>e.json()).then(e=>{let{data:t,errors:n}=e;t?(a(t),l(t.log.replace(S,"\n"))):l("Error retrieving seed: ".concat(n))})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"FF6WC seed ".concat(d)}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(N.t,{}),(0,n.jsxs)("div",{className:"flex flex-col gap-6 items-center px-12 py-6",children:[(0,n.jsx)(o.Zb,{className:"max-w-[1260px]",title:"Log",children:(0,n.jsx)(c.x,{children:(0,n.jsx)(o.dn,{children:null!=t?t:"Loading..."})})}),e&&(0,n.jsx)(b,{seed:e})]}),(0,n.jsx)(i.$_,{})]})};var y=R},2218:function(e,a,t){"use strict";function n(e){return 3146240===e.length?e.slice(512):e}async function l(e){return 3145728!==e.length?{success:!1,message:"Invalid ROM size. Please upload an uncompressed US version 1.0 ROM file. Expected ".concat(3145728," and received ").concat(e.length,".")}:"0f51b4fca41b7fd509e4b8f9d543151f68efa5e97b08493e4b2a0c06f5d8d5e2"!==Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",e))).map(e=>e.toString(16).padStart(2,"0")).join("")?{success:!1,message:"Invalid ROM hash. Please upload an uncompressed US version 1.0 ROM file"}:{success:!0,message:""}}t.d(a,{L:function(){return l},o:function(){return n}})}},function(e){e.O(0,[433,31,136,762,876,882,774,888,179],function(){return e(e.s=953)}),_N_E=e.O()}]);